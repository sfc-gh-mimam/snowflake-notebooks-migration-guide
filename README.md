[{"text": "# Snowflake Notebooks Migration Guide\n\nAn enterprise-ready Streamlit application designed to help sales teams and customers migrate from deprecated warehouse-backed notebooks to compute pool-backed notebooks in Snowflake.\n\n## Features\n\n### Core Functionality\n\n- **Migration Calculator**: Interactive tool to generate compute pool recommendations based on current warehouse configuration\n- **Cost Comparison**: Side-by-side analysis of warehouse vs compute pool costs with savings projections\n- **SQL Templates**: Production-ready SQL queries for cost monitoring, budget tracking, and usage analysis\n- **Best Practices Guide**: Optimization strategies for right-sizing, timeout configuration, and cost management\n- **Setup Wizard**: Step-by-step migration guide with validation checklists\n- **PDF Export**: Generate downloadable PDF reports from any section\n\n### Key Capabilities\n\n\u2705 Warehouse to compute pool mapping recommendations  \n\u2705 GPU instance family selection for ML workloads  \n\u2705 Cost projections with customizable credit rates  \n\u2705 Budget alert threshold calculator  \n\u2705 User attribution and chargeback strategies  \n\u2705 Idle pool detection queries  \n\u2705 Configuration templates for common workload types  \n\u2705 Scenario comparison (save and compare up to 3 configurations)  \n\n## Installation\n\n### Prerequisites\n\n- Python 3.8 or higher\n- pip package manager\n\n### Setup\n\n1. **Clone or download this repository**\n\n```bash\ncd spcs-test1\n```\n\n2. **Install dependencies**\n\n```bash\npip install -r requirements.txt\n```\n\n3. **Run the application**\n\n```bash\nstreamlit run app/main.py\n```\n\nThe app will open in your default web browser at `http://localhost:8501`.\n\n## Usage\n\n### Navigation\n\nThe application consists of 6 main sections:\n\n1. **Landing Page**: Overview and quick navigation\n2. **Why Compute Pools?**: Benefits, comparison tables, and migration urgency guide\n3. **Migration Calculator**: Primary tool for generating recommendations\n4. **Cost Monitoring**: SQL query library for tracking and budgeting\n5. **Best Practices**: Optimization strategies and configuration templates\n6. **Getting Started**: Step-by-step setup wizard\n\n### Migration Calculator Workflow\n\n1. Navigate to \"Migration Calculator\" page\n2. Input your configuration:\n   - Current warehouse size (XS - 6XL)\n   - Workload type (SQL-heavy, ML-heavy, Balanced, Interactive)\n   - Expected concurrent users\n   - GPU requirement (if applicable)\n   - Usage hours per day\n   - Credit rate\n\n3. Click \"Calculate Recommendation\"\n4. Review:\n   - Instance family recommendation\n   - Node count guidance\n   - Cost comparison charts\n   - Monthly savings projection\n   - Auto-suspend recommendations\n\n5. Generate SQL:\n   - Customize compute pool name\n   - Download migration SQL\n   - Save scenario for comparison\n\n6. Export results as PDF\n\n### Cost Monitoring Setup\n\n1. Navigate to \"Cost Monitoring\" page\n2. Review budget setup queries\n3. Download SQL templates:\n   - Daily credit consumption tracking\n   - Budget threshold monitoring\n   - User attribution queries\n   - Idle pool detection\n   - Weekly/hourly usage patterns\n\n4. Customize pool names in queries\n5. Use alert threshold calculator\n6. Export complete monitoring guide as PDF\n\n## Customization\n\n### Pricing Data\n\nThe application uses placeholder pricing data. To customize for your organization:\n\n1. **Edit warehouse specifications**:\n   - File: `app/data/warehouse_specs.json`\n   - Update `credits_per_hour` values based on your actual warehouse costs\n\n2. **Edit compute pool specifications**:\n   - File: `app/data/compute_pool_specs.json`\n   - Update `credits_per_hour` values for each instance family\n\n3. **Adjust credit rate**:\n   - Default: $4 per credit\n   - Users can customize in the calculator interface\n   - Or modify default in `app/models/cost_calculator.py`\n\n### Workload Multipliers\n\nAdjust recommendation logic in `app/models/warehouse_mapping.py`:\n\n```python\nworkload_multipliers = {\n    \"SQL-heavy\": 0.8,     # Adjust based on your workload patterns\n    \"ML-heavy\": 1.5,\n    \"Balanced\": 1.0,\n    \"Interactive\": 0.9\n}\n```\n\n### Styling & Branding\n\nCustomize appearance in `.streamlit/config.toml`:\n\n```toml\n[theme]\nprimaryColor = \"#29B5E8\"  # Your brand color\nbackgroundColor = \"#FFFFFF\"\nsecondaryBackgroundColor = \"#F0F8FF\"\n```\n\nModify CSS in `app/components/styling.py` for advanced customization.\n\n### SQL Templates\n\nAdd or modify SQL queries in `app/data/sql_templates/`:\n\n- `cost_monitoring.sql` - Daily tracking queries\n- `budget_setup.sql` - Budget configuration\n- `usage_queries.sql` - Advanced analysis queries\n\n## Architecture\n\n### Project Structure\n\n```\nspcs-test1/\n\u251c\u2500\u2500 .streamlit/\n\u2502   \u2514\u2500\u2500 config.toml              # Theme configuration\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 main.py                  # Landing page\n\u2502   \u251c\u2500\u2500 pages/                   # Multi-page app sections\n\u2502   \u2502   \u251c\u2500\u2500 1_Why_Compute_Pools.py\n\u2502   \u2502   \u251c\u2500\u2500 2_Migration_Calculator.py\n\u2502   \u2502   \u251c\u2500\u2500 3_Cost_Monitoring.py\n\u2502   \u2502   \u251c\u2500\u2500 4_Best_Practices.py\n\u2502   \u2502   \u2514\u2500\u2500 5_Getting_Started.py\n\u2502   \u251c\u2500\u2500 components/              # Reusable UI components\n\u2502   \u2502   \u251c\u2500\u2500 styling.py           # CSS and styling utilities\n\u2502   \u2502   \u251c\u2500\u2500 charts.py            # Plotly chart generators\n\u2502   \u2502   \u2514\u2500\u2500 pdf_export.py        # PDF generation\n\u2502   \u251c\u2500\u2500 models/                  # Business logic\n\u2502   \u2502   \u251c\u2500\u2500 warehouse_mapping.py # Recommendation engine\n\u2502   \u2502   \u2514\u2500\u2500 cost_calculator.py   # Cost comparison logic\n\u2502   \u2514\u2500\u2500 data/                    # Configuration data\n\u2502       \u251c\u2500\u2500 warehouse_specs.json\n\u2502       \u251c\u2500\u2500 compute_pool_specs.json\n\u2502       \u2514\u2500\u2500 sql_templates/\n\u2502           \u251c\u2500\u2500 cost_monitoring.sql\n\u2502           \u251c\u2500\u2500 budget_setup.sql\n\u2502           \u2514\u2500\u2500 usage_queries.sql\n\u251c\u2500\u2500 requirements.txt\n\u2514\u2500\u2500 README.md\n```\n\n### Key Components\n\n**Recommendation Engine** (`warehouse_mapping.py`):\n- Maps warehouse sizes to appropriate compute pool configurations\n- Applies workload-specific multipliers\n- Handles GPU instance selection\n- Generates migration SQL\n\n**Cost Calculator** (`cost_calculator.py`):\n- Computes monthly cost projections\n- Compares warehouse vs compute pool costs\n- Calculates savings and ROI\n\n**PDF Export** (`pdf_export.py`):\n- Converts page content to print-friendly HTML\n- Generates PDFs using WeasyPrint\n- Includes disclaimers and timestamps\n\n## Deployment\n\n### Streamlit Community Cloud\n\n1. Push code to GitHub repository\n2. Connect repository to Streamlit Cloud\n3. Deploy from `app/main.py`\n\n### Docker\n\n```dockerfile\nFROM python:3.9-slim\n\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\nCOPY app/ ./app/\nCOPY .streamlit/ ./.streamlit/\n\nEXPOSE 8501\nCMD [\"streamlit\", \"run\", \"app/main.py\", \"--server.port=8501\"]\n```\n\n### Internal Enterprise Deployment\n\n- Use internal Streamlit server or Snowflake Streamlit in Snowflake\n- Configure authentication (SSO, OAuth)\n- Customize with actual pricing data\n- Enable audit logging\n\n## Troubleshooting\n\n### Common Issues\n\n**PDF Export Not Working**\n```bash\n# WeasyPrint requires additional system libraries\n# On macOS:\nbrew install cairo pango gdk-pixbuf libffi\n\n# On Ubuntu/Debian:\nsudo apt-get install libpango-1.0-0 libpangocairo-1.0-0\n```\n\n**Port Already in Use**\n```bash\nstreamlit run app/main.py --server.port=8502\n```\n\n**Import Errors**\n```bash\n# Ensure you're in the correct directory\ncd spcs-test1\npython -c \"import sys; sys.path.append('app'); from models import recommend_compute_pool\"\n```\n\n## Disclaimers\n\n- Cost estimates are based on placeholder credit rates\n- Always validate pricing with your Snowflake account team\n- SQL queries should be tested in non-production environments first\n- Compute pool configurations may need adjustment based on actual usage\n\n## Support\n\n- For Snowflake-specific questions: Contact your Snowflake account team\n- For application issues: Check Streamlit documentation at docs.streamlit.io\n- Community support: community.snowflake.com\n\n## Roadmap\n\nPotential future enhancements:\n\n- [ ] Integration with Snowflake APIs for live cost data\n- [ ] Historical cost trend visualization\n- [ ] Automated recommendation refinement based on actual usage\n- [ ] Multi-pool comparison and optimization\n- [ ] Role-based access control\n- [ ] Custom report scheduling\n- [ ] Snowflake Native App version\n\n## License\n\nThis tool is provided as-is for customer enablement purposes. Customize as needed for your organization.\n\n## Version\n\nCurrent Version: 1.0.0  \nLast Updated: 2024\n", "type": "text"}]